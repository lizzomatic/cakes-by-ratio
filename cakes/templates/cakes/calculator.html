{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cakes by Ratio</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
       
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;

            background-image: url("{% static 'images/cakes.jpg' %}");
            background-repeat: repeat;                /* this makes it tile */
            background-size: 120px 120px;                        /* default tiling size */

            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        
        h1 {
            color: #0064e7;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        h2 {
            color: #0064e7;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2 em;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
        }
        
        input[type="number"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input[type="number"]:focus {
            outline: none;
            border-color: #667eea;
        }
        
        button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #0064e7 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        button:hover {
            transform: translateY(-2px);
        }
        
        .error {
            background: #fee;
            color: #c33;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #c33;
        }
        
        .recipe {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 8px;
            margin-top: 25px;
        }
        
        .recipe h2 {
            color: 064e7;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .header-info {
            background: #667eea;
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            margin-bottom: 20px;
            font-weight: 600;
        }
        
        .ingredient {
            padding: 12px;
            margin-bottom: 10px;
            background: white;
            border-radius: 6px;
            border-left: 4px solid #667eea;
        }
        
        .ingredient strong {
            color: #0064e7;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸŽ‚ Cakes by Ratio ðŸŽ‚</h1>

        <p>This cake recipe is meant for experimenting. It features fresh fruit and accomidates any nuts or seeds you have in your pantry. 
            I developed this recipe over a few years as a whole foods allergy-friendly alternative to so many coffee house muffins. 
            The recipe has eggs and a few key structural ingredients, but it is otherwise very flexible. I usually make a single cake with one egg, but I like to make bigger cakes or big batches of mini-muffins. I wanted to share this recipe in a way that can be easily scaled.
            It's Lovely with coffee or tea in the morning, served warm with butter, greek yogurt, chevre, almond butter, or honey. 
            Feel free to riff on my recipe, use your freshest berries, apples, pears. Mix in nuts at the end. 
            Have fun with this cake; it's a pleasure to make, eat, and share with friends.

            At some point I will hone an egg-free version of this recipe for my vegan and egg-allergic friends, but for everyone else this cake wins at high-protein breakfast.
        </p>
        <br>
        <p>Fill in your cake requirements and limitations to get your recipe:</p>
        <br>
        {% if error %}
        <div class="error">{{ error }}</div>
        {% endif %}
        
        <form method="post">
            {% csrf_token %}

            <div class="form-group">
                <label for="people">How many cake-eaters?</label>
                <input type="number" id="people" name="people" min="1" value="{{ people_input }}" required>
            </div>

            <div class="form-group">
                <label for="eggs">How many eggs do you have?</label>
                <input type="number" id="eggs" name="eggs" min="1" value="{{ eggs_input }}" required>
            </div>
        
            <button type="submit">Calculate Recipe</button>
        </form>
        
        {% if recipe %}
        <div class="recipe">
            <h2>Your Custom Cake Recipe:</h2>
            <div class="header-info">
                Ingredients:
            </div>
            
            <div class="ingredient">
                <strong>{{ recipe.banana|floatformat:3 }}-{{ recipe.banana_max|floatformat:3.5 }} oz.</strong> banana
            </div>
            <div class="ingredient">
                <strong>{{ recipe.eggs }}</strong> egg{{ recipe.eggs|pluralize }}
            </div>
            <div class="ingredient">
                <strong>{{ recipe.baking_soda|floatformat:2 }} tsp.</strong> baking soda
            </div>
            <div class="ingredient">
                <strong>{{ recipe.flax_seeds|floatformat:2 }} Tbs.</strong> whole flax seeds
            </div>
            <div class="ingredient">
                <strong>{{ recipe.seeds_nuts_grains|floatformat:2 }} cup{{ recipe.seeds_nuts_grains|floatformat:0|pluralize }}</strong> seeds, nuts, whole grains
            </div>
            <div class="ingredient">
                <strong>{{ recipe.cinnamon|floatformat:2 }} tsp.</strong> cinnamon
            </div>
            <div class="ingredient">
                <strong>{{ recipe.ginger|floatformat:2 }} Tbs.</strong> fresh grated ginger
            </div>
            <div class="ingredient">
                <strong>{{ recipe.vinegar|floatformat:2.5 }} Tbs.</strong> apple cider vinegar
            </div>
            <div class="ingredient">
                <strong>{{ recipe.fruit|floatformat:0.5 }} cup</strong> berries or sliced fruit
            </div>
            <div class="header-info">
                Instructions:
            </div>
            <div class="ingredient">
                Preheat oven to 350Â°F.
            </div> 
            <div class="ingredient">
                In a bowl, mash the bananas thoroughly. I often use apple or other fruit sauce. 
            </div> 
            <div class="ingredient">
                Add the eggs, baking soda, flax seeds, and mix well. You can let this sit for a few minutes while you prepare the rest of the ingredients (flax seeds absorb some of this liquid). 
            </div> 
            <div class="ingredient">
                Measure out nuts and seeds together. You can use whatever you have on hand. I regularly use a big/small combination of the following: walnuts, almonds, pumpkin, sunflower, or seseme seeds, buckwheat groats, quinoa, amaranth, teff, or any nut, seed or cereal whole grain. I put in the bigger nuts and seeds first and fill the smaller seeds or grain to fill in the gaps. 
            </div> 
            <div class="ingredient">
                Grind nuts and seeds in a coffee grider or flour mill until it's a flour texture. 
            </div> 
            <div class="ingredient">
                Grate fresh ginger. 
            </div> 
            <div class="ingredient">
                Add these to the wet mixture with cinnamon and optional pinch of salt and stir to combine. 
            </div> 
            <div class="ingredient">           
                Oil a pan or muffin tins. My secret tip here is to sprinkle seeds or coconut flakes on the oiled pan and shake the pan around to distribute. This helps to remove the cake from the pan after baking and can also be a dectorative element.
            </div> 
            <div class="ingredient">    
                Pour the batter into the lined pan, scraping remaining batter with a spatula. 
            </div> 
            <div class="ingredient">
                Arrange berries or fresh fruit, pressing them into the cake batter. 
            </div> 
            <div class="ingredient">
                Bake at 350Â°F (175Â°C) for 25-40 minutes (varies by pan size) or until a toothpick inserted into the center comes out clean. Let cool at least a little bit before serving, so you don't burn your tongue. I like to eat this hot with butter. 
            </div> 
            <div class="ingredient">    
                If you've lined the pan with fruit or seeds, you might be able to flip the pan over and the cake will fall out. Otherwise use a spatula to loosen the cake from the pan. This cake can also be served the pan.
            </div>
             <div class="ingredient">
                Enjoy!
            </div>
        {% endif %}
    </div>

</body>
</html>
